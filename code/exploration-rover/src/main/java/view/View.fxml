<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.CubicCurveTo?>
<?import javafx.scene.shape.MoveTo?>
<?import javafx.scene.shape.Path?>

<BorderPane prefHeight="720" prefWidth="1200" styleClass="root" stylesheets="@styles.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1">

    <!-- TOP BAR -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="12" styleClass="topbar">
            <padding>
                <Insets bottom="14" left="14" right="14" top="14" />
            </padding>

            <Label styleClass="statusDot" text="â—" />

            <VBox spacing="2">
                <Label styleClass="title" text="Tableau de bord Sonar et Capteurs" />
                <Label styleClass="subtitle" text="Monitoring System v2.4" />
            </VBox>

            <Region HBox.hgrow="ALWAYS" />

            <Label styleClass="pill" text="Status : En ligne" />
            <Button styleClass="iconBtn" text="âš™" />
        </HBox>
    </top>

    <!-- CENTER -->
    <center>
        <VBox spacing="14" styleClass="page">
            <padding>
                <Insets bottom="14" left="14" right="14" top="14" />
            </padding>

            <!-- Main row -->
            <HBox spacing="14" VBox.vgrow="ALWAYS">

                <!-- SONAR -->
                <VBox spacing="10" styleClass="card" HBox.hgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT">
                        <VBox spacing="2">
                            <Label styleClass="cardTitle" text="Visualisation Sonar" />
                            <Label styleClass="cardSub" text="Scan statique Â· PortÃ©e: 50m" />
                        </VBox>
                        <Region HBox.hgrow="ALWAYS" />
                        <Button styleClass="primaryBtn" text="Agrandir" />
                    </HBox>

                    <!-- Zone sonar (dessin simple) -->
                    <StackPane styleClass="panel" VBox.vgrow="ALWAYS">
                        <Pane prefHeight="320" prefWidth="700">
                     <Canvas height="42.0" layoutX="42.0" layoutY="289.0" width="683.0" fx:id="xAxisCanva" />
                        </Pane>
                    </StackPane>

                    <HBox spacing="10">
                        <Label styleClass="muted" text="GAIN : 3/5" />
                        <Label styleClass="muted" text="PROFONDEUR : 12.4 m" />
                    </HBox>
                </VBox>

                <!-- RIGHT SENSORS -->
                <VBox prefWidth="360" spacing="10" styleClass="card">
                    <HBox alignment="CENTER_LEFT">
                        <Label styleClass="cardTitle" text="DonnÃ©es Capteurs" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button styleClass="linkBtn" text="RÃ©initialiser" />
                    </HBox>

                    <!-- Temp -->
                    <VBox spacing="8" styleClass="miniCard">
                        <Label styleClass="miniTitle" text="ðŸŒ¡ TempÃ©rature" />
                        <HBox alignment="BASELINE_LEFT" spacing="6">
                            <Label fx:id="lblTemperature" styleClass="bigValue" />
                            <Label styleClass="unit" text="Â°C" />
                        </HBox>
                        <ProgressBar progress="0.62" styleClass="greenBar" />
                        <Label styleClass="mutedSmall" text="Moyenne: 24.1Â°C" />
                    </VBox>

                    <!-- HumiditÃ© -->
                    <VBox spacing="8" styleClass="miniCard">
                        <Label styleClass="miniTitle" text="ðŸ’§ HumiditÃ© relative" />
                        <HBox alignment="BASELINE_LEFT" spacing="6">
                            <Label fx:id="lblHumidite" styleClass="bigValue" />
                            <!-- IMPORTANT: pour afficher % seul => "%%" -->
                            <Label styleClass="unit" text="%%" />
                        </HBox>
                        <ProgressBar progress="0.48" styleClass="greenBar" />
                        <Label styleClass="mutedSmall" text="Zone de confort" />
                    </VBox>

                    <!-- LumiÃ¨re -->
                    <VBox spacing="8" styleClass="miniCard">
                        <Label styleClass="miniTitle" text="ðŸ’¡ IntensitÃ© lumiÃ¨re" />
                        <HBox alignment="BASELINE_LEFT" spacing="6">
                            <Label fx:id="lblLuminosite" styleClass="bigValue" />
                            <Label styleClass="unit" text="Lux" />
                        </HBox>
                        <ProgressBar progress="0.85" styleClass="redBar" />
                        <Label styleClass="mutedSmall" text="IntensitÃ© Ã©levÃ©e" />
                    </VBox>
                </VBox>

            </HBox>

            <!-- TRAJECTORY -->
            <VBox spacing="10" styleClass="card">
                <HBox alignment="CENTER_LEFT">
                    <VBox spacing="2">
                        <Label styleClass="cardTitle" text="Trajectoire du Rover" />
                        <Label styleClass="cardSub" text="Visualisation statique" />
                    </VBox>
                    <Region HBox.hgrow="ALWAYS" />
                    <Label styleClass="pill" text="X : 45.2   Y : 12.8" />
                </HBox>

                <StackPane prefHeight="140" styleClass="panel">
                    <Pane prefHeight="140" prefWidth="1100">
                        <Path styleClass="trajLine">
                            <elements>
                                <MoveTo x="60" y="100" />
                                <CubicCurveTo controlX1="220" controlX2="360" controlY1="80" controlY2="60" x="520" y="55" />
                                <CubicCurveTo controlX1="680" controlX2="820" controlY1="50" controlY2="48" x="980" y="46" />
                            </elements>
                        </Path>
                        <Circle centerX="980" centerY="46" radius="5" styleClass="trajDot" />
                    </Pane>
                </StackPane>
            </VBox>

        </VBox>
    </center>

</BorderPane>
