<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Ellipse?>
<?import javafx.scene.shape.Line?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<BorderPane prefHeight="720" prefWidth="1200" styleClass="root" stylesheets="@styles.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="view.View">

    <!-- TOP BAR -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="12" styleClass="topbar">
            <padding>
                <Insets bottom="14" left="14" right="14" top="14" />
            </padding>

            <Label styleClass="statusDot" text="â—" />

            <VBox spacing="2">
                <Label styleClass="title" text="Tableau de bord Sonar et Capteurs" />
                <Label styleClass="subtitle" text="Monitoring System v1.5" />
            </VBox>

            <Region HBox.hgrow="ALWAYS" />

            <Label styleClass="pill" text="Status : En ligne" />
            <Button styleClass="iconBtn" text="âš™" />
        </HBox>
    </top>
   <bottom>
        <VBox prefHeight="770.0" prefWidth="1200.0" spacing="14" styleClass="page" BorderPane.alignment="CENTER">
            <padding>
                <Insets bottom="14" left="14" right="14" top="14" />
            </padding>

            <!-- Main row -->
            <HBox spacing="14" VBox.vgrow="ALWAYS">

                <!-- SONAR -->
                <VBox spacing="10" styleClass="card" HBox.hgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT">
                        <VBox spacing="2">
                            <Label styleClass="cardTitle" text="Visualisation Sonar" />
                            <Label styleClass="cardSub" text="Scan statique Â· PortÃ©e: 12cm" />
                        </VBox>
                        <Region HBox.hgrow="ALWAYS" />
                    </HBox>

                    <!-- Zone sonar (dessin simple) -->
                    <StackPane styleClass="panel" VBox.vgrow="ALWAYS">
                        <Pane prefHeight="436.0" prefWidth="762.0">
                     <Line endX="-100.0" endY="393.0" layoutX="176.0" layoutY="52.0" startX="-100.0" startY="-53.0" styleClass="sonarGraduation" />
                     <Rectangle arcHeight="5.0" arcWidth="5.0" height="80.0" layoutX="284.0" layoutY="358.0" stroke="BLACK" strokeType="INSIDE" styleClass="sonarRover" width="200.0" />
                     <Ellipse fx:id="cl120" layoutX="381.0" layoutY="98.0" radiusX="11.0" radiusY="9.0" stroke="BLACK" strokeType="INSIDE" styleClass="sonarBlipBlack" />
                     <Text layoutX="354.0" layoutY="407.0" strokeType="OUTSIDE" strokeWidth="0.0" styleClass="sonarRoverText" text="Rover">
                        <font>
                           <Font size="22.0" />
                        </font>
                     </Text>
                     <Line endX="25.0" layoutX="177.0" layoutY="279.0" startX="-100.0" styleClass="sonarGraduation" />
                     <Line endX="25.0" layoutX="177.0" layoutY="97.0" startX="-100.0" styleClass="sonarGraduation" />
                     <Line endX="25.0" layoutX="177.0" layoutY="187.0" startX="-100.0" styleClass="sonarGraduation" />
                     <Line endX="25.0" layoutX="177.0" layoutY="358.0" startX="-100.0" styleClass="sonarGraduation" />
                     <Text layoutX="28.0" layoutY="283.0" strokeType="OUTSIDE" strokeWidth="0.0" styleClass="sonarGraduationText" text="40mm" />
                     <Text layoutX="28.0" layoutY="192.0" strokeType="OUTSIDE" strokeWidth="0.0" styleClass="sonarGraduationText" text="80mm" />
                     <Text layoutX="24.0" layoutY="101.0" strokeType="OUTSIDE" strokeWidth="0.0" styleClass="sonarGraduationText" text="120mm" />
                     <Line endX="-30.0" layoutX="177.0" layoutY="144.0" startX="-100.0" styleClass="sonarGraduation" />
                     <Line endX="-30.0" layoutX="177.0" layoutY="232.0" startX="-100.0" styleClass="sonarGraduation" />
                     <Text layoutX="30.0" layoutY="362.0" strokeType="OUTSIDE" strokeWidth="0.0" styleClass="sonarGraduationText" text="0 mm" />
                     <Ellipse fx:id="cl80" layoutX="381.0" layoutY="187.0" radiusX="11.0" radiusY="9.0" stroke="BLACK" strokeType="INSIDE" styleClass="sonarBlipBlack" />
                     <Ellipse fx:id="cl100" layoutX="381.0" layoutY="143.0" radiusX="11.0" radiusY="9.0" stroke="BLACK" strokeType="INSIDE" styleClass="sonarBlipBlack" />
                     <Ellipse fx:id="cl60" layoutX="381.0" layoutY="231.0" radiusX="11.0" radiusY="9.0" stroke="BLACK" strokeType="INSIDE" styleClass="sonarBlipBlack" />
                     <Ellipse fx:id="cl40" layoutX="381.0" layoutY="278.0" radiusX="11.0" radiusY="9.0" stroke="BLACK" strokeType="INSIDE" styleClass="sonarBlipBlack" />
                        </Pane>
                    </StackPane>

                    <HBox spacing="10">
                        <Label styleClass="muted" text="GAIN : 3/5" />
                        <Label styleClass="muted" text="PROFONDEUR : 12.4 m" />
                    </HBox>
                </VBox>

                <!-- RIGHT SENSORS -->
                <VBox prefWidth="360" spacing="10" styleClass="card">
                    <HBox alignment="CENTER_LEFT">
                        <Label styleClass="cardTitle" text="DonnÃ©es Capteurs" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="btnReinitialiser" styleClass="linkBtn" text="RÃ©initialiser" />
                    </HBox>

                    <!-- Temp -->
                    <VBox spacing="8" styleClass="miniCard">
                        <Label styleClass="miniTitle" text="ðŸŒ¡ TempÃ©rature" />
                        <HBox alignment="BASELINE_LEFT" spacing="6">
                            <Label fx:id="lblTemperature" styleClass="bigValue" />
                            <Label styleClass="unit" text="Â°C" />
                        </HBox>
                        <ProgressBar progress="0.62" styleClass="greenBar" />
                        <Label styleClass="mutedSmall" text="Moyenne: 24.1Â°C" />
                    </VBox>

                    <!-- HumiditÃ© -->
                    <VBox spacing="8" styleClass="miniCard">
                        <Label styleClass="miniTitle" text="ðŸ’§ HumiditÃ© relative" />
                        <HBox alignment="BASELINE_LEFT" spacing="6">
                            <Label fx:id="lblHumidite" styleClass="bigValue" />
                            <!-- IMPORTANT: pour afficher % seul => "%%" -->
                            <Label styleClass="unit" text="%%" />
                        </HBox>
                        <ProgressBar progress="0.48" styleClass="greenBar" />
                        <Label styleClass="mutedSmall" text="Zone de confort" />
                    </VBox>

                    <!-- LumiÃ¨re -->
                    <VBox spacing="8" styleClass="miniCard">
                        <Label styleClass="miniTitle" text="ðŸ’¡ IntensitÃ© lumiÃ¨re" />
                        <HBox alignment="BASELINE_LEFT" spacing="6">
                            <Label fx:id="lblLuminosite" styleClass="bigValue" />
                            <Label styleClass="unit" text="Lux" />
                        </HBox>
                        <ProgressBar progress="0.44" styleClass="redBar" />
                        <Label styleClass="mutedSmall" />
                    </VBox>

                    <VBox spacing="8" styleClass="miniCard">
                        <Label styleClass="miniTitle" text="ðŸ—ª Message systÃ¨me" />
                        <Label fx:id="lblMessage" styleClass="sensorMessage" text="..." wrapText="true" />
                    </VBox>
                </VBox>

            </HBox>

            <!-- TRAJECTORY -->
            <VBox spacing="10" styleClass="card">
                <HBox alignment="CENTER_LEFT">
                    <VBox spacing="2">
                        <Label styleClass="cardTitle" text="Trajectoire du Rover" />
                        <Label styleClass="cardSub" text="Visualisation statique" />
                    </VBox>
                    <Region HBox.hgrow="ALWAYS" />
                    <Label styleClass="pill" text="X : 45.2   Y : 12.8" />
                </HBox>

                <StackPane prefHeight="140" styleClass="panel">
                    <Pane prefHeight="140" prefWidth="1100" />
                </StackPane>
            </VBox>

        </VBox>
   </bottom>

</BorderPane>
